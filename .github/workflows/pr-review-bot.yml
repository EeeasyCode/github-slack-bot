name: PR review bot

on:
  # 스케쥴러로 실행
  schedule:
    - cron: "8 15 * * 1-5"
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
    - name: Set up Python 3.12
      uses: actions/setup-python@v3
      with:
        python-version: "3.12"

    # 의존성 설치
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
    # python 파일 실행
    - name: run main.py
      run: |
        python main.py

    - name: .env setting
      run: |
        echo "Github_Token=${{ secrets.GIT_TOKEN }}" >> .env
        echo "Github_Repo_Name=${{ secrets.GIT_REPO_NAME }}" >> .env
        echo "slack_token=${{ secrets.SLACK_TOKEN }}" >> .env
        echo "channel_id=${{ secrets.CHANNEL_ID }}" >> .env